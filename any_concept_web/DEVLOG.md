# 开发日志

## DEVLOG 编写规则

- 记录主要功能开发和重大改动，不记录琐碎的样式调整等小改动
- 保持总结性和概述性，避免过于详细的实现细节
- 按时间顺序组织，使用清晰的日期标题
- 对重要组件和功能使用二级标题进行分类
- 使用简洁的要点列表描述变更内容

---

## 项目初始化

- 使用 `create-next-app` 创建 Next.js 项目
- 配置 TypeScript、ESLint 和 App Router

## 核心组件开发

### InteractiveText 组件

- 实现交互式文本组件，支持点击展开内容
- 添加打字机效果和动画
- 支持嵌套内容结构
- 实现文本分词处理，解决中英文混排自然换行问题

### TypewriterText 组件

- 实现打字机效果的文本显示
- 添加背景色块和交互样式
- 优化文本显示动画

## 交互功能增强

### 点击计数器

- 添加点击计数统计功能
- 实现闪烁效果指示器（蓝色、灰色、绿色）
- 添加初始加载动画效果

### 内容结构优化

- 实现可交互项总数统计
- 添加完成状态标识（🎉）
- 优化展开内容的显示逻辑

## 字体与样式系统

### 字体集成

- 集成 JetBrains Mono 字体
- 添加 Noto Serif SC 中文衬线字体
- 添加 Noto Sans SC 中文无衬线字体
- 配置多种字重支持

### 样式系统优化

- 使用 Tailwind CSS 控制字体和样式
- 优化文本容器样式，支持自然换行
- 调整背景色块样式和圆角

## 页面开发

- 创建主页及内容结构
- 添加 craft 和 projects 页面框架
- 优化页面布局和响应式设计

## 导航系统与字体优化

### NavButton 组件

- 实现固定在右下角的圆形导航按钮
- 添加导航菜单覆盖层，支持页面跳转
- 实现按钮图标切换动画效果，使用贝塞尔曲线优化过渡
- 添加菜单项状态指示（当前页面、悬停状态、开发中状态）
- 优化响应式布局，适配不同屏幕尺寸

### 字体加载优化

- 修复中文字体加载错误问题
- 优化字体权重配置，减少不必要的字体加载
- 添加字体预加载和后备字体配置
- 将页面语言设置更改为中文

### 配置更新

- 将 Turbopack 配置从实验性功能更新为稳定版配置
- 优化字体文件加载规则
- 修复开发服务器警告信息

## 作品展示系统优化

### Craft详情页面开发

- 创建动态路由`/craft/[slug]`用于展示作品详情
- 设计并实现作品详情页布局，支持图片和视频内容展示
- 在数据模型中添加完整的作品信息结构，包括描述、图片集和链接
- 优化作品展示组件，支持内部页面导航和外部链接

### 组件架构优化

- 将代码拆分为服务器组件和客户端组件，解决了"use client"与"generateStaticParams()"不能共存的问题
- 实现媒体内容自适应渲染系统，根据文件类型自动选择图片或视频渲染方式
- 修复图片间距和视频文件路径问题
- 优化响应式布局，确保在不同屏幕尺寸上都能良好显示

## 作品展示网格布局优化

### WorkItem组件增强

- 添加aspectRatio属性支持，实现统一宽高比的卡片布局
- 优化图片和视频的显示方式，保持一致的视觉效果
- 实现Group Hover交互效果，提升用户体验
- 改进外部链接按钮的视觉反馈，添加悬停状态样式变化

### 瀑布流布局优化

- 改进作品展示页面的瀑布流布局，优化不同屏幕尺寸下的显示效果
- 调整网格间距和边距，提升整体视觉一致性
- 优化图片加载策略，提高页面性能
- 实现响应式布局自适应，确保在移动设备上的良好显示效果

## Next.js 15 兼容性升级

### 动态API异步处理优化

- 升级项目到Next.js 15，更新所有相关依赖
- 修复动态路由中params参数的异步处理问题，解决"sync-dynamic-apis"警告
- 使用`await params`模式重构所有动态路由页面组件
- 将所有数据获取函数改为异步函数，确保与Next.js 15异步API兼容

### 系统字体优化

- 更新字体配置，使用系统默认字体替代部分自定义字体
- 简化字体加载流程，提高页面初始化性能
- 保留JetBrains Mono作为代码和特殊文本的字体
- 优化字体回退链，提高跨平台显示一致性

## 多语言国际化支持

### 国际化系统实现

- 创建中英文切换功能，支持根据浏览器语言设置自动显示对应语言
- 实现国际化上下文(Context)系统，用于全局管理语言状态
- 添加语言切换组件，允许用户手动切换中英文
- 使用本地存储记住用户语言偏好设置

### 内容本地化

- 为主页内容创建中英文版本
- 为导航菜单和UI元素添加翻译
- 实现动态内容加载系统，根据当前语言加载对应数据
- 优化客户端和服务端渲染的兼容性，解决水合问题

## 文本显示与国际化优化

### 英文单词间距问题修复

- 修改InteractiveText组件中的tokenizeText函数，添加语言检测功能
- 为英文文本实现不同的分词策略，保持单词完整性
- 将TypewriterText组件的CSS类从whitespace-normal改为whitespace-pre-wrap以保留空格
- 优化文本显示效果，解决英文单词被错误断开的问题

### 中英文切换功能完善

- 为crafts页面和projects页面添加与首页一致的语言切换功能
- 更新localizedData.ts文件，增加crafts和projects的多语言数据支持
- 将相关服务器组件转换为客户端组件，使用useEffect在语言变更时重新获取数据
- 解决React水合错误，确保服务器渲染与客户端渲染一致
- 将所有硬编码的翻译文本集中到i18n/locales目录下的zh.ts和en.ts文件
- 在组件中统一使用t('projects.xxx')方式引用翻译，提高代码可维护性
